.inline-tip{width:clamp(420px,85%,1400px);margin:10px auto 0 auto;color:#D6E4FF;text-shadow:0 1px 2px rgba(0,0,0,.4);text-align:center}
.chip[data-icon]{position:relative;padding-left:28px}
.chip[data-icon]::before{content:"";position:absolute;left:10px;top:50%;transform:translateY(-50%);width:14px;height:14px;background-color:currentColor;-webkit-mask:var(--chip-icon) no-repeat center/contain;mask:var(--chip-icon) no-repeat center/contain}
.chip[data-icon="keyframe"]{--chip-icon:url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path fill='%23000' d='M12 4 4 12l8 8 8-8-8-8Z'/></svg>")}
.chip[data-icon="preset"]{--chip-icon:url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path fill='%23000' d='M3 5h18v4H3V5zm0 5h12v4H3v-4zm0 5h18v4H3v-4z'/></svg>")}
.chip[data-icon="record"]{--chip-icon:url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><circle cx='12' cy='12' r='5' fill='%23000'/></svg>")}
*{box-sizing:border-box} html,body{height:100%}
body{margin:0;font-family:Inter,system-ui,Segoe UI,Roboto,Arial,sans-serif;color:var(--text);background:linear-gradient(180deg,#0B1220 0%, #0F172A 100%);position:relative;}
/* lớp noise rất nhẹ 2% phủ toàn trang */
/* nền trang đặt ảnh từ file anh/BAckGround.png */
body::before{content:"";position:fixed;inset:0;pointer-events:none;opacity:1;background-image:url("anh/BAckGround.png");background-size:cover;background-position:center;filter:blur(6px) brightness(1.15);} 
/* lớp overlay sáng nhẹ để tăng độ tương phản */
body::after{content:"";position:fixed;inset:0;background:radial-gradient(120% 120% at 50% 30%, rgba(255,255,255,.10), rgba(255,255,255,0) 60%);pointer-events:none}

/* khung trung tâm chứa toàn bộ UI cũ */
.app-frame{position:relative;max-width:1200px;min-height:720px;margin:40px auto;padding:16px 16px 28px;border-radius:16px;box-shadow:0 28px 80px rgba(2,6,23,.55), 0 6px 18px rgba(2,6,23,.35);background:
  radial-gradient(70% 100% at 5% 50%, rgba(56,189,248,.42) 0%, rgba(56,189,248,0) 70%),
  radial-gradient(70% 100% at 95% 55%, rgba(124,58,237,.48) 0%, rgba(124,58,237,0) 70%),
  linear-gradient(180deg,#0E1A27 0%, #3B5A7C 100%);
  backdrop-filter:blur(4px);box-shadow:0 20px 60px rgba(0,0,0,.45);border:1px solid rgba(59,130,246,.35)}
.app-frame::before{content:"";position:absolute;inset:0;border-radius:inherit;pointer-events:none;box-shadow:0 0 0 2px rgba(59,130,246,.35), 0 0 16px rgba(59,130,246,.25) inset}
.app-frame::after{content:"";position:absolute;left:0;right:0;bottom:0;top:40%;border-radius:inherit;background:linear-gradient(180deg, rgba(255,255,255,0) 0%, rgba(255,255,255,.08) 100%);pointer-events:none}

.app-header{position:sticky;top:0;display:flex;align-items:center;justify-content:space-between;padding:12px 20px;background:rgba(15,24,40,.55);backdrop-filter:blur(8px);border-bottom:1px solid var(--line);z-index:10}
.brand{display:flex;align-items:center;gap:10px}
.logo{width:20px;height:20px;border-radius:6px;object-fit:contain}
.wordmark{font-weight:700;letter-spacing:.2px;color:#FFFFFF;font-style:italic}
.actions{display:flex;align-items:center;gap:10px}
.badge{padding:6px 10px;border-radius:999px;border:1px solid var(--border);background:rgba(16,185,129,.12)}
.badge.ready{border-color:rgba(16,185,129,.35);color:#A7F3D0}
.badge.connecting{border-color:rgba(245,158,11,.35);color:#FCD34D;animation:pulse 2s infinite}
.badge.connected{border-color:rgba(16,185,129,.35);color:#A7F3D0}

@keyframes pulse{
  0%,100%{opacity:1}
  50%{opacity:.7}
}

.app-shell{display:grid;grid-template-columns:260px 1fr;gap:24px;padding:24px}
.sidebar{position:sticky;top:64px;align-self:start;padding-right:16px;margin-right:8px}
.app-shell{position:relative}
/* Line dọc */
.app-shell::before{content:"";position:absolute;top:0;bottom:0;left:272px;width:1px;background:var(--line);pointer-events:none}
/* Line ngang ngay dưới khu nội dung (trước footer) để vuông góc với line dọc */
.app-shell::after{content:"";position:absolute;bottom:-12px;left:0;width:100%;height:1px;background:var(--line);pointer-events:none}
.menu{display:flex;flex-direction:column;gap:16px;margin-bottom:16px}
.menu .item{display:flex;align-items:center;gap:10px;padding:10px 12px;border-radius:10px;color:#E5E7EB;cursor:pointer;border:none;background:transparent}
.menu .item:hover{background:rgba(0,0,0,.35);color:#FFFFFF}
.menu .item.active{background:transparent;color:#E5E7EB;border:none;box-shadow:none}
.menu .item::before{content:"";width:18px;height:18px;flex:0 0 18px;background-color:currentColor;-webkit-mask:var(--icon) no-repeat center/contain;mask:var(--icon) no-repeat center/contain;opacity:.9}
.menu .item[data-icon="grid"]{--icon:url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path fill='%23000' d='M3 3h8v8H3V3zm10 0h8v8h-8V3zM3 13h8v8H3v-8zm10 0h8v8h-8v-8z'/></svg>")}
.menu .item[data-icon="settings"]{--icon:url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path fill='%23000' d='M12 8a4 4 0 1 1 0 8 4 4 0 0 1 0-8Zm8.5 4 2-1-1-3-2 .5a7.9 7.9 0 0 0-1.7-1l.2-2.1-3-1-1 1.8a7.9 7.9 0 0 0-2-.2L10.3 2h-3l.2 2.1a7.9 7.9 0 0 0-1.7 1L3 4.5l-1 3 2 1a8 8 0 0 0 0 2l-2 1 1 3 2-.5c.5.4 1.1.8 1.7 1L7.3 20l3 1 1-1.8c.7.1 1.3.1 2 0L14.7 21l3-1-.2-2.1c.6-.3 1.2-.6 1.7-1l2 .5 1-3-2-1c.1-.7.1-1.3 0-2Z'/></svg>")}
.qr-card{position:relative;padding:16px;border:1px solid rgba(255,255,255,.14);border-radius:14px;background:linear-gradient(180deg, rgba(10,18,30,.92) 0%, rgba(22,34,50,.92) 100%);backdrop-filter:blur(8px);box-shadow:0 12px 36px rgba(0,0,0,.45)}
.qr-card::after{content:"";position:absolute;inset:0;border-radius:inherit;background:radial-gradient(100% 120% at 50% 30%, rgba(255,255,255,.06), rgba(255,255,255,0) 60%);pointer-events:none}
.qr-img{width:160px;height:160px;border-radius:12px;background:repeating-linear-gradient(45deg,rgba(255,255,255,.08) 0 10px,rgba(255,255,255,.05) 10px 20px);object-fit:cover}

/* QR Container - Tối ưu cho QR code */
#qrContainer {
  width: 200px !important;
  height: 200px !important;
  min-width: 200px;
  min-height: 200px;
  background: #ffffff !important;
  border: 1px solid #e0e0e0;
  border-radius: 12px;
  display: flex;
  align-items: center;
  justify-content: center;
  overflow: hidden;
  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
  margin: 0 auto 12px auto;
}

/* Canvas QR code bên trong */
#qrContainer canvas {
  max-width: 100% !important;
  max-height: 100% !important;
  width: auto !important;
  height: auto !important;
  border-radius: 8px;
}
.w-full{width:100%}

.paircode{display:flex;align-items:center;gap:10px;margin-top:16px;padding:10px;border:1px dashed var(--border);border-radius:10px;background:rgb(253, 253, 253)}
.paircode .label{opacity:.7}
.paircode .code{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:18px;letter-spacing:2px}
.paircode .copy{margin-left:auto;padding:6px 10px;border-radius:8px;border:1px solid var(--border);background:var(--surface);color:var(--text);cursor:pointer}
.room-expires{font-size:12px;color:#F59E0B;text-align:center;margin-top:8px;padding:4px 8px;background:rgba(245,158,11,.1);border-radius:6px;border:1px solid rgba(245,158,11,.2)}
.hidden{display:none}

/* Chữ dưới QR */
.qr-caption{color:#FFFFFF;text-align:center;margin-top:-6px;margin-bottom:8px}

.content{display:flex;flex-direction:column;gap:24px}
.player-card{padding:0;border:none;border-radius:18px;background:transparent;box-shadow:none;display:flex;justify-content:center}
.player{position:relative;aspect-ratio:9/16;border-radius:18px;background:#000;display:flex;align-items:center;justify-content:center;overflow:hidden;box-shadow:0 20px 60px rgba(0,0,0,.6);width:clamp(320px,60%,800px);margin:24px auto;max-height:80vh}
.player::after{content:"";position:absolute;inset:0;box-shadow:inset 0 0 120px rgba(0,0,0,.35)}
.player video{width:100%;height:100%;object-fit:contain;border-radius:18px}
.metrics-float{position:absolute;top:12px;right:12px;display:flex;gap:8px}
.chip{border:1px solid var(--border);padding:6px 10px;border-radius:999px;background:rgba(0,0,0,.35);font-size:12px;color:#E5E7EB}
.chip.primary{color:#3B82F6;border-color:rgba(59,130,246,.45);background:rgba(59,130,246,.12);box-shadow:0 0 0 1px rgba(59,130,246,.2) inset}
.chip.success{color:#10B981;border-color:rgba(16,185,129,.45);background:rgba(16,185,129,.12);box-shadow:0 0 0 1px rgba(16,185,129,.2) inset}
.chip.warning{color:#F59E0B;border-color:rgba(245,158,11,.45);background:rgba(245,158,11,.12);box-shadow:0 0 0 1px rgba(245,158,11,.2) inset}
.play-btn{position:relative;display:grid;place-items:center;width:84px;height:84px;border-radius:50%;border:none;background:linear-gradient(180deg,var(--primary-2),var(--primary));color:#fff;box-shadow:0 10px 28px rgba(37,99,235,.35);cursor:pointer}
.play-btn:hover{transform:translateY(-1px)}
.play-ring{position:absolute;inset:-10px;border-radius:999px;border:2px solid rgba(34,211,238,.35);filter:drop-shadow(0 0 12px rgba(34,211,238,.35));animation:pulse 2s infinite}
@keyframes pulse{0%{opacity:.8;transform:scale(.9)}70%{opacity:.15;transform:scale(1.2)}100%{opacity:0;transform:scale(1.25)}}
.hint{position:absolute;bottom:12px;opacity:.7;font-size:13px}

/* Nút fullscreen góc phải dưới của player */
.btn-fs{position:absolute;right:16px;bottom:16px;width:36px;height:36px;border-radius:8px;border:none;background:rgba(0,0,0,.35);cursor:pointer;z-index:10;pointer-events:auto}
.btn-fs::before{content:"";display:block;width:20px;height:20px;margin:8px;background-color:#fff;-webkit-mask:url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path fill='currentColor' d='M4 14h2v4h4v2H4v-6zm10 6v-2h4v-4h2v6h-6zM4 10V4h6v2H6v4H4zm14-2V6h-4V4h6v6h-2z'/></svg>") no-repeat center/contain;mask:url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path fill='currentColor' d='M4 14h2v4h4v2H4v-6zm10 6v-2h4v-4h2v6h-6zM4 10V4h6v2H6v4H4zm14-2V6h-4V4h6v6h-2z'/></svg>") no-repeat center/contain}
.btn-fs:hover{background:rgba(0,0,0,.5)}

/* Fullscreen styles */
.player:fullscreen .btn-fs{position:fixed;bottom:20px;right:20px;z-index:9999}
.player:-webkit-full-screen .btn-fs{position:fixed;bottom:20px;right:20px;z-index:9999}
.player:-moz-full-screen .btn-fs{position:fixed;bottom:20px;right:20px;z-index:9999}

.smartcast-card{padding:16px;border:1px solid var(--border);border-radius:14px;background:var(--surface);display:flex;align-items:center;justify-content:space-between;gap:16px;margin-top:8px}
.smartcast-header{display:flex;align-items:center;gap:16px}
.latency-gauge .label{opacity:.7;margin-right:6px}
.latency-gauge .value{color:#A5B4FC}
.btn{padding:12px 18px;border-radius:12px;border:1px solid transparent;cursor:pointer;transition:transform .15s,box-shadow .15s}
.btn-primary{background:linear-gradient(180deg,#2D6AF0,#2257D9);color:#fff;box-shadow:0 8px 24px rgba(34,87,217,.35)}
.btn-warning{background:linear-gradient(180deg,#F59E0B,#D97706);color:#0F172A}
.btn-secondary{background:var(--surface);border-color:var(--border);color:var(--text)}
.btn:hover{transform:translateY(-1px)}

/* removed stats cards (trùng thông tin với chip telemetry) */

.chips-row{display:flex;align-items:center;justify-content:center;gap:16px;padding-top:12px;margin-top:8px;width:clamp(420px,85%,1400px);margin-left:auto;margin-right:auto;flex-wrap:nowrap}
.chip-group + .chip-group{padding-left:12px}
.chip-group{display:flex;flex-wrap:wrap;gap:8px}
.chip.button,.chips-row .chip{cursor:pointer}
.chip.is-active{outline:2px solid rgba(37,99,235,.35);background:rgba(37,99,235,.08)}
.chip.recording{outline:2px solid rgba(239,68,68,.35);background:rgba(239,68,68,.08);color:#FCA5A5;animation:recording-pulse 1s infinite}
@keyframes recording-pulse{0%,100%{opacity:1}50%{opacity:.7}}

/* Preset popover */
.preset-menu{position:fixed;z-index:1001;left:50%;top:50%;transform:translate(-50%,-50%);min-width:320px;max-width:90vw;padding:8px;border:1px solid var(--border);border-radius:12px;background:rgba(15,24,40,.98);backdrop-filter:none;box-shadow:0 12px 36px rgba(0,0,0,.45)}
.preset-menu .preset-item{display:block;width:100%;text-align:left;padding:10px 12px;border:none;background:transparent;color:#E5E7EB;border-radius:10px;cursor:pointer;-webkit-appearance:none;appearance:none}
.preset-menu .preset-item:hover{background:rgba(146, 125, 125, 0.06)}
.preset-menu .preset-item.is-selected{background:rgba(59,130,246,.15);box-shadow:0 0 0 1px rgba(59,130,246,.35) inset}
.preset-menu .title{display:block;font-weight:600}
.preset-menu .desc{display:block;opacity:.7;font-size:12px;margin-top:2px}
.hidden{display:none}

/* backdrop cho popover * /
.preset-backdrop{position:fixed;inset:0;background:rgba(0,0,0,.25);backdrop-filter:none;z-index:1000}

.app-footer{margin:24px;padding:12px 16px;border-radius:12px;background:rgba(17,26,42,.7);backdrop-filter:blur(8px)}
.app-footer{position:relative}
.app-footer::before{content:"";display:none}
.tip{opacity:.85}
.app-footer .tip + .tip{margin-top:8px;border-top:1px solid var(--border);padding-top:8px}

/* Settings Panel */
.settings-panel{display:none;max-width:980px;margin:0 auto;padding:16px 20px;border:1px solid var(--border);border-radius:14px;background:rgba(15,24,40,.6);backdrop-filter:blur(8px)}
.app-shell:has(.settings-panel:not(.hidden)) .player-card{min-height:0}
.app-shell:has(.settings-panel:not(.hidden)) .content{min-height:0}
.settings-header{display:flex;align-items:center;gap:10px}
.back-link{background:transparent;border:none;color:#9CA3AF;cursor:pointer}
.settings-panel h2.settings-title{margin:0;font-size:18px;color:#fff}
.settings-grid{display:grid;grid-template-columns:1fr 1fr;gap:28px;margin-top:12px}
.setting-group{margin-top:0;padding-top:14px;border-top:1px solid var(--line)}
.setting-group h3{margin:0 0 8px 0;color:#A5B4FC;font-size:14px}
.setting-item{display:flex;align-items:center;justify-content:space-between;gap:16px;padding:10px 0;color:#E5E7EB}
.setting-item select{background:var(--surface);border:1px solid var(--border);color:var(--text);border-radius:8px;padding:8px 10px}
.switch{width:40px;height:22px;appearance:none;background:#374151;border-radius:999px;position:relative;outline:none;cursor:pointer}
.switch:checked{background:#3B82F6}
.switch::after{content:"";position:absolute;top:3px;left:3px;width:16px;height:16px;border-radius:50%;background:#fff;transition:left .15s}
.switch:checked::after{left:21px}
.setting-actions{margin-top:14px;display:flex;justify-content:flex-end}
.setting-actions.left{justify-content:flex-start}
.range-wrap{display:flex;align-items:center;gap:10px;min-width:240px}
.range-wrap input[type=range]{width:220px}
.range-val{opacity:.8;font-size:12px}

@media (max-width: 1180px){
  .app-shell{grid-template-columns:1fr}
  .sidebar{position:static}
  .player{width:90%;max-width:500px;}
}

@media (max-width: 768px){
  .player{width:95%;max-width:400px;aspect-ratio:9/16;}
  .player video{object-fit:contain;}
}

/* Countdown Modal Styles */
.countdown-modal {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.8);
  backdrop-filter: blur(8px);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 9999;
  opacity: 0;
  visibility: hidden;
  transition: all 0.3s ease;
}

.countdown-modal:not(.hidden) {
  opacity: 1;
  visibility: visible;
}

.countdown-content {
  text-align: center;
  color: white;
}

.countdown-circle {
  position: relative;
  width: 120px;
  height: 120px;
  margin: 0 auto 24px;
}

.countdown-number {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  font-size: 48px;
  font-weight: 700;
  color: #60A5FA;
  text-shadow: 0 0 20px rgba(96, 165, 250, 0.5);
  z-index: 2;
}

.countdown-ring {
  width: 100%;
  height: 100%;
  transform: rotate(-90deg);
}

.countdown-ring-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 4;
}

.countdown-ring-progress {
  fill: none;
  stroke: #60A5FA;
  stroke-width: 4;
  stroke-linecap: round;
  stroke-dasharray: 283;
  stroke-dashoffset: 283;
  transition: stroke-dashoffset 1s linear;
  filter: drop-shadow(0 0 8px rgba(96, 165, 250, 0.6));
}

.countdown-text {
  font-size: 24px;
  font-weight: 600;
  margin-bottom: 8px;
  color: #FFFFFF;
  text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
}

.countdown-subtext {
  font-size: 16px;
  color: #D1D5DB;
  opacity: 0.8;
}

/* Animation for countdown number */
@keyframes countdownPulse {
  0% { transform: translate(-50%, -50%) scale(1); }
  50% { transform: translate(-50%, -50%) scale(1.1); }
  100% { transform: translate(-50%, -50%) scale(1); }
}

.countdown-number.animating {
  animation: countdownPulse 0.5s ease;
}

